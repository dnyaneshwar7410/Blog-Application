{% extends "base.html" %}
{% block content %}

<div class="container mt-4">

  <!-- HERO SECTION (First Featured Post) -->
  {% for post in featured_posts %}
    {% if forloop.first %}
    <div class="p-5 mb-4 text-white rounded hero-section"
         style="background-image: url({{ post.featured_image.url }});">
      <div class="overlay"></div>
      <div class="content col-md-8">
        <h1 class="display-5 fw-bold">{{ post.title }}</h1>
        <p class="lead">
          {{ post.short_description|truncatewords:15 }}
        </p>
        <a href="{% url 'blogs' post.slug %}" 
           class="btn btn-warning btn-sm">
          Continue Reading â†’
        </a>
      </div>
    </div>
    {% endif %}
  {% endfor %}

  <!-- FEATURED POSTS -->
  <h4 class="text-uppercase text-warning mb-4" style="letter-spacing: 2px">
    Featured Posts
  </h4>

  <div class="row g-4 mb-5">
    {% for post in featured_posts %}
      {% if not forloop.first %}
      <div class="col-12 col-md-6">
        <div class="card h-100 shadow-sm border-0 post-card">
          <div class="card-body">
            <h5>
              <a href="{% url 'blogs' post.slug %}"
                 class="text-dark text-decoration-none fw-bold">
                {{ post.title }}
              </a>
            </h5>

            <small class="text-muted d-block mb-2">
              {{ post.created_at|timesince }} ago |
              {{ post.author }}
            </small>

            <p>
              {{ post.short_description|truncatewords:15 }}
            </p>
          </div>
        </div>
      </div>
      {% endif %}
    {% endfor %}
  </div>

  <!-- MAIN CONTENT -->
  <div class="row">

    <!-- RECENT POSTS -->
    <div class="col-12 col-lg-8">
      <h4 class="text-uppercase text-warning mb-4"
          style="letter-spacing: 2px">
        Recent Posts
      </h4>

      {% for post in posts %}
      <div class="card mb-4 border-0 shadow-sm post-card">
        <div class="card-body">
          <h5>
            <a href="{% url 'blogs' post.slug %}"
               class="text-dark text-decoration-none fw-bold">
              {{ post.title }}
            </a>
          </h5>

          <small class="text-muted d-block mb-2">
            {{ post.created_at|timesince }} ago |
            {{ post.author }}
          </small>

          <p>
            {{ post.short_description|truncatewords:25 }}
          </p>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- SIDEBAR -->
    <div class="col-12 col-lg-4 mt-4 mt-lg-0">

      <!-- About -->
      <div class="card border-0 shadow-sm mb-4">
        <div class="card-body">
          <h5 class="fw-bold">{{ about_us.name }}</h5>
          <p class="text-muted">
            {{ about_us.description }}
          </p>
        </div>
      </div>

      <!-- Social Links -->
      {% if social_links %}
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <h5 class="fw-bold mb-3">Follow Us</h5>
          <ul class="list-unstyled">
            {% for i in social_links %}
            <li class="mb-2">
              <a href="{{ i.link }}" target="_blank"
                 class="text-decoration-none social-link">
                {{ i.platform }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}

    </div>

  </div>

</div>


<!-- CUSTOM STYLES -->
<style>

/* HERO SECTION */
.hero-section {
  position: relative;
  background-size: cover;
  background-position: center;
  overflow: hidden;
}

.hero-section .overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
}

.hero-section .content {
  position: relative;
  z-index: 2;
}

/* CARD HOVER EFFECT */
.post-card {
  transition: all 0.3s ease;
  border-radius: 12px;
}

.post-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

/* SOCIAL LINK EFFECT */
.social-link {
  transition: 0.3s;
}

.social-link:hover {
  padding-left: 8px;
  color: #ffc107;
}

</style>

{% endblock %}
